<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <title>Item</title>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div id="item" class="container"></div>
    <footer id="footer"></footer>
    
    <script id="template" type="text/template">
      <div class="page-header">
        <h1>{{name}}</h1>
      
        <ol class="breadcrumb">
          <li><a href="/">Home</a></li>
          <li><a href="index.html">Family History</a></li>
          <li class="active">{{name}}</li>
        </ol>

        <p>{{description}}</p>
      </div>

      <div class="row">
        <div class="col-md-4">
          <dl>
            <dt>Name</dt>
            <dd>{{name}}</dd>
    
            <dt>Description</dt>
            <dd>{{description}}</dd>
    
            <dt>Family Member</dt>
            <dd>{{owner}}</dd>

            <dt>FamilySearch ID</dt>
            <dd>{{fsid}}</dd>
    
            <dt>Demensions</dt>
            <dd>{{demensions}}</dd>
    
            <dt>Material</dt>
            <dd>{{material}}</dd>
          </dl>
        </div>
        {{#photos}}
        <div class="col-md-4">
          <img src="./data/{{.}}" alt="{{name}}" class="img-responsive, img-thumbnail"/>
        </div>
        {{/photos}}
      </div>

      <h2>Stories</h2>

      {{#stories}}
        {{#details}}
          <p>{{.}}</p>
        {{/details}}
        <p> - {{source}}</p>
      {{/stories}}

    </script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.1.3/mustache.min.js"></script>
    <script src="/js/chamfam.js"></script>
    
    <script type="text/javascript">
      $.getJSON( "data/" + window.location.search.substring(1) + ".json" )
        .done( function( data ){
          var template = $( "#template" ).html();
          var output = Mustache.to_html( template, data );
          $( "#item" ).html( output );
          document.title = data.name;
        })
        .fail( function( jqxhr, textStatus, error ) {
          $( "#item" ).html( "<div class=\"alert alert-danger\">Request Failed: " + textStatus + ", " + error + "</div>" );
        });
    </script>
  </body>
</html>